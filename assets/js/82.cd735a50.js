(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{509:function(t,e,s){"use strict";s.r(e);var n=s(30),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jwt与token-redis-哪种方案更好用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jwt与token-redis-哪种方案更好用"}},[t._v("#")]),t._v(" jwt与token+redis，哪种方案更好用？")]),t._v(" "),s("p",[s("strong",[t._v("两种Token")])]),t._v(" "),s("h2",{attrs:{id:"去中心化的jwt-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#去中心化的jwt-token"}},[t._v("#")]),t._v(" 去中心化的JWT token")]),t._v(" "),s("ul",[s("li",[t._v("优点：\n"),s("ol",[s("li",[t._v("去中心化，便于分布式系统使用")]),t._v(" "),s("li",[t._v("基本信息可以直接放在token中。 username，nickname，role")]),t._v(" "),s("li",[t._v("功能权限信息可以直接放在token中。用bit位表示用户所具有的功能权限。")])])]),t._v(" "),s("li",[t._v("缺点：服务端无法主动让token失效")])]),t._v(" "),s("h2",{attrs:{id:"中心化的-redis-token-memory-session等"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中心化的-redis-token-memory-session等"}},[t._v("#")]),t._v(" 中心化的 redis token / memory session等")]),t._v(" "),s("ul",[s("li",[t._v("优点：服务端可以主动让token失效")]),t._v(" "),s("li",[t._v("缺点：每次都要进行redis查询。占用redis存储空间。")])]),t._v(" "),s("h2",{attrs:{id:"优化方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化方案"}},[t._v("#")]),t._v(" 优化方案")]),t._v(" "),s("ol",[s("li",[t._v("Jwt Token中，增加TokenId字段。")]),t._v(" "),s("li",[t._v("将TokenId字段存储在redis中，用来让服务端可以主动控制token失效")]),t._v(" "),s("li",[t._v("牺牲了JWT去中心化的特点。")]),t._v(" "),s("li",[t._v("使用非对称加密。颁发token的认证服务器存储私钥：私钥生成签名。其他业务系统存储公钥：公钥验证签名。")])])])}),[],!1,null,null,null);e.default=r.exports}}]);