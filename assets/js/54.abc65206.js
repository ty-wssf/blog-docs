(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{470:function(t,a,e){"use strict";e.r(a);var s=e(30),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"linux下springboot-jar-如何实现service服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux下springboot-jar-如何实现service服务"}},[t._v("#")]),t._v(" Linux下SpringBoot Jar 如何实现service服务")]),t._v(" "),e("h2",{attrs:{id:"实现service服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现service服务"}},[t._v("#")]),t._v(" 实现service服务")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("确保目标服务器已经配置好Java运行环境")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('# 检查jar环境\n@ java -version\nopenjdk version "1.8.0_222"\nOpenJDK Runtime Environment (build 1.8.0_222-b10)\nOpenJDK 64-Bit Server VM (build 25.222-b10, mixed mode)\n')])])]),e("ol",{attrs:{start:"2"}},[e("li",[e("strong",[t._v("上传jar到目标机器")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("scp cloud-txlcn.jar root@192.168.2.101:/opt/cloud/txlcn\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[e("strong",[t._v("建立软连接")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ln -s /opt/cloud/txlcn/cloud-txlcn/jar /etc/init.d/cloud-txlcn\n# cloud-txcln服务名\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[e("strong",[t._v("配置service相关信息")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 启动应用\nservice cloud-txlcn start/stop\n# 配置开机服务\nsystemctl enable cloud-txlcn\n# 重启应用\nsystemctl restart cloud-txlcn\n# 重启服务器\nreboot\n# 验证是否生效\nps aux|grep cloud-txlcn\nroot  5914 29.1 17.9 2272304 181856 pts/1  Sl   22:41   0:32 /bin/java -Dsun.misc.URLClassPath.disableJarChecking=true -jar /opt/cloud/tm/txlcn-tm-5.0.2.RELEASE.jar\n")])])]),e("h2",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),e("ol",[e("li",[e("p",[e("strong",[t._v("使用service xxx start命令启动失败。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("service xxx start\n/etc/init.d/cloud-txlcn: /etc/init.d/cloud-txlcn: cannot execute binary file\n")])])]),e("blockquote",[e("p",[t._v("原因就是打成的jar包不能自己执行")])]),t._v(" "),e("p",[t._v("注意：在pom.xml中没有配置"),e("code",[t._v("<executable>true</executable>")]),t._v("，那么生成的jar包是没法自己执行的，只能通过java -jar xxx.jar执行。 或者")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("nohup java -Xms64m -Xmx256m -Xmn128m -Xss256k -jar sentinel-dashboard-1.6.3.jar logs/start.out 2>&1 &\n")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("执行 service cloud-txlcn start 显示权限不够")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("service xxx start\nenv: /etc/init.d/cloud-txlcn: 权限不够\n")])])]),e("blockquote",[e("p",[t._v("解决方法：chmod a+wrx /etc/init.d/cloud-txlcn")])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);