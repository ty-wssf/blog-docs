(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{579:function(r,t,e){"use strict";e.r(t);var a=e(30),i=Object(a.a)({},(function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h1",{attrs:{id:"springcloud面试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#springcloud面试"}},[r._v("#")]),r._v(" SpringCloud面试")]),r._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[r._v("#")]),r._v(" 前言")]),r._v(" "),e("p",[r._v("Spring Cloud是一系列框架的有序集合。它利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用Spring Boot的开发风格做到一键启动和部署。Spring Cloud并没有重复制造轮子，它只是将各家公司开发的比较成熟、经得起实际考验的服务框架组合起来，通过Spring Boot风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。")]),r._v(" "),e("h3",{attrs:{id:"spring-cloud有以下特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud有以下特点"}},[r._v("#")]),r._v(" Spring Cloud有以下特点:")]),r._v(" "),e("ul",[e("li",[r._v("约定优于配置；")]),r._v(" "),e("li",[r._v("适用于各种环境。开发、部署PC Server或各种云环境（例如阿里云、AWS等）均可；")]),r._v(" "),e("li",[r._v("隐藏了组件的复杂性，并提供声明式、无xml的配置方式；")]),r._v(" "),e("li",[r._v("开箱即用，快速启动；")]),r._v(" "),e("li",[r._v("轻量级的组件。Spring Cloud整合的组件大多比较轻量。例如Eureka、Zuul等，都是各自领域轻量级的实现；")]),r._v(" "),e("li",[r._v("组件丰富，功能齐全。Spring Cloud 为微服务架构提供了非常完整的支持。例如、配置管理、服务发现、断路器、微服务网关等；")]),r._v(" "),e("li",[r._v("选型中立、丰富。例如，Spring Cloud支持使用Eureka、Zookeeper或Consul实现服务发现；")]),r._v(" "),e("li",[r._v("灵活。Spring Cloud的组成部分是解耦的，开发人员可以按需灵活挑选技术选型。")])]),r._v(" "),e("h2",{attrs:{id:"spring-cloud面试题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud面试题"}},[r._v("#")]),r._v(" Spring Cloud面试题")]),r._v(" "),e("p",[r._v("1、什么是 Spring Cloud？")]),r._v(" "),e("p",[r._v("2、使用 Spring Cloud 有什么优势？")]),r._v(" "),e("p",[r._v("3、服务注册和发现是什么意思？Spring Cloud 如何实现？")]),r._v(" "),e("p",[r._v("4、Spring Cloud 和dubbo区别?")]),r._v(" "),e("p",[r._v("5、SpringBoot和SpringCloud的区别？")]),r._v(" "),e("p",[r._v("6、负载平衡的意义什么？")]),r._v(" "),e("p",[r._v("7、什么是 Hystrix？它如何实现容错？")]),r._v(" "),e("p",[r._v("8、什么是 Hystrix 断路器？我们需要它吗？")]),r._v(" "),e("p",[r._v("9、什么是 Netflix Feign？它的优点是什么？")]),r._v(" "),e("p",[r._v("10、什么是 Spring Cloud Bus？我们需要它吗？")]),r._v(" "),e("p",[r._v("11、Spring Cloud断路器的作用")]),r._v(" "),e("p",[r._v("12、什么是SpringCloudConfig?")]),r._v(" "),e("p",[r._v("13、Spring Cloud Gateway?")]),r._v(" "),e("h2",{attrs:{id:"spring-cloud面试题答案解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud面试题答案解析"}},[r._v("#")]),r._v(" Spring Cloud面试题答案解析")]),r._v(" "),e("h3",{attrs:{id:"_1、什么是-spring-cloud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、什么是-spring-cloud"}},[r._v("#")]),r._v(" 1、什么是 Spring Cloud？")]),r._v(" "),e("p",[r._v("Spring cloud 流应用程序启动器是基于 Spring Boot 的 Spring 集成应用程序，提供与外部系统的集成。Spring cloud Task，一个生命周期短暂的微服务框架，用于快速构建执行有限数据处理的应用程序。")]),r._v(" "),e("h3",{attrs:{id:"_2、使用-spring-cloud-有什么优势"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、使用-spring-cloud-有什么优势"}},[r._v("#")]),r._v(" 2、使用 Spring Cloud 有什么优势？")]),r._v(" "),e("p",[r._v("使用 Spring Boot 开发分布式微服务时，我们面临以下问题")]),r._v(" "),e("p",[r._v("（1）与分布式系统相关的复杂性-这种开销包括网络问题，延迟开销，带宽问题，安全问题。")]),r._v(" "),e("p",[r._v("（2）服务发现-服务发现工具管理群集中的流程和服务如何查找和互相交谈。它涉及一个服务目录，在该目录中注册服务，然后能够查找并连接到该目录中的服务。")]),r._v(" "),e("p",[r._v("（3）冗余-分布式系统中的冗余问题。")]),r._v(" "),e("p",[r._v("（4）负载平衡 --负载平衡改善跨多个计算资源的工作负荷，诸如计算机，计算机集群，网络链路，中央处理单元，或磁盘驱动器的分布。")]),r._v(" "),e("p",[r._v("（5）性能-问题 由于各种运营开销导致的性能问题。")]),r._v(" "),e("p",[r._v("（6）部署复杂性-Devops 技能的要求。")]),r._v(" "),e("h3",{attrs:{id:"_3、服务注册和发现是什么意思-spring-cloud-如何实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、服务注册和发现是什么意思-spring-cloud-如何实现"}},[r._v("#")]),r._v(" 3、服务注册和发现是什么意思？Spring Cloud 如何实现？")]),r._v(" "),e("p",[r._v("当我们开始一个项目时，我们通常在属性文件中进行所有的配置。随着越来越多的服务开发和部署，添加和修改这些属性变得更加复杂。有些服务可能会下降，而某些位置可能会发生变化。手动更改属性可能会产生问题。 Eureka 服务注册和发现可以在这种情况下提供帮助。由于所有服务都在 Eureka 服务器上注册并通过调用 Eureka 服务器完成查找，因此无需处理服务地点的任何更改和处理。")]),r._v(" "),e("h3",{attrs:{id:"_4、spring-cloud-和dubbo区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、spring-cloud-和dubbo区别"}},[r._v("#")]),r._v(" 4、Spring Cloud 和dubbo区别?")]),r._v(" "),e("p",[r._v("（1）服务调用方式 dubbo是RPC springcloud Rest Api")]),r._v(" "),e("p",[r._v("（2）注册中心,dubbo 是zookeeper springcloud是eureka，也可以是zookeeper")]),r._v(" "),e("p",[r._v("（3）服务网关,dubbo本身没有实现，只能通过其他第三方技术整合，springcloud有Zuul路由网关，作为路由服务器，进行消费者的请求分发,springcloud支持断路器，与git完美集成配置文件支持版本控制，事物总线实现配置文件的更新与服务自动装配等等一系列的微服务架构要素。")]),r._v(" "),e("h3",{attrs:{id:"_5、springboot和springcloud的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、springboot和springcloud的区别"}},[r._v("#")]),r._v(" 5、SpringBoot和SpringCloud的区别？")]),r._v(" "),e("p",[r._v("SpringBoot专注于快速方便的开发单个个体微服务。")]),r._v(" "),e("p",[r._v("SpringCloud是关注全局的微服务协调整理治理框架，它将SpringBoot开发的一个个单体微服务整合并管理起来，")]),r._v(" "),e("p",[r._v("为各个微服务之间提供，配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等集成服务")]),r._v(" "),e("p",[r._v("SpringBoot可以离开SpringCloud独立使用开发项目， 但是SpringCloud离不开SpringBoot ，属于依赖的关系.")]),r._v(" "),e("p",[r._v("SpringBoot专注于快速、方便的开发单个微服务个体，SpringCloud关注全局的服务治理框架。")]),r._v(" "),e("h3",{attrs:{id:"_6、负载平衡的意义什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6、负载平衡的意义什么"}},[r._v("#")]),r._v(" 6、负载平衡的意义什么？")]),r._v(" "),e("p",[r._v("在计算中，负载平衡可以改善跨计算机，计算机集群，网络链接，中央处理单元或磁盘驱动器等多种计算资源的工作负载分布。负载平衡旨在优化资源使用，最大化吞吐量，最小化响应时间并避免任何单一资源的过载。使用多个组件进行负载平衡而不是单个组件可能会通过冗余来提高可靠性和可用性。负载平衡通常涉及专用软件或硬件，例如多层交换机或域名系统服务器进程。")]),r._v(" "),e("h3",{attrs:{id:"_7、什么是-hystrix-它如何实现容错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7、什么是-hystrix-它如何实现容错"}},[r._v("#")]),r._v(" 7、什么是 Hystrix？它如何实现容错？")]),r._v(" "),e("p",[r._v("Hystrix 是一个延迟和容错库，旨在隔离远程系统，服务和第三方库的访问点，当出现故障是不可避免的故障时，停止级联故障并在复杂的分布式系统中实现弹性。")]),r._v(" "),e("p",[r._v("通常对于使用微服务架构开发的系统，涉及到许多微服务。这些微服务彼此协作。")]),r._v(" "),e("p",[r._v("思考以下微服务")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbfd3e3fd28~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("p",[r._v("假设如果上图中的微服务 9 失败了，那么使用传统方法我们将传播一个异常。但这仍然会导致整个系统崩溃。")]),r._v(" "),e("p",[r._v("随着微服务数量的增加，这个问题变得更加复杂。微服务的数量可以高达 1000.这是 hystrix 出现的地方 我们将使用 Hystrix 在这种情况下的 Fallback 方法功能。我们有两个服务 employee-consumer 使用由 employee-consumer 公开的服务。")]),r._v(" "),e("p",[r._v("简化图如下所示")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbfce671b83~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("p",[r._v("现在假设由于某种原因，employee-producer 公开的服务会抛出异常。我们在这种情况下使用 Hystrix 定义了一个回退方法。这种后备方法应该具有与公开服务相同的返回类型。如果暴露服务中出现异常，则回退方法将返回一些值。")]),r._v(" "),e("h3",{attrs:{id:"_8、什么是-hystrix-断路器-我们需要它吗"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8、什么是-hystrix-断路器-我们需要它吗"}},[r._v("#")]),r._v(" 8、什么是 Hystrix 断路器？我们需要它吗？")]),r._v(" "),e("p",[r._v("由于某些原因，employee-consumer 公开服务会引发异常。在这种情况下使用Hystrix 我们定义了一个回退方法。如果在公开服务中发生异常，则回退方法返回一些默认值。")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbfceefa92a~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("p",[r._v("如果 firstPage method() 中的异常继续发生，则 Hystrix 电路将中断，并且员工使用者将一起跳过 firtsPage 方法，并直接调用回退方法。 断路器的目的是给第一页方法或第一页方法可能调用的其他方法留出时间，并导致异常恢复。可能发生的情况是，在负载较小的情况下，导致异常的问题有更好的恢复机会 。")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbfd4e33ae7~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("h3",{attrs:{id:"_9、什么是-netflix-feign-它的优点是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9、什么是-netflix-feign-它的优点是什么"}},[r._v("#")]),r._v(" 9、什么是 Netflix Feign？它的优点是什么？")]),r._v(" "),e("p",[r._v("Feign 是受到 Retrofit，JAXRS-2.0 和 WebSocket 启发的 java 客户端联编程序。")]),r._v(" "),e("p",[r._v("Feign 的第一个目标是将约束分母的复杂性统一到 http apis，而不考虑其稳定性。")]),r._v(" "),e("p",[r._v("在 employee-consumer 的例子中，我们使用了 employee-producer 使用 REST模板公开的 REST 服务。")]),r._v(" "),e("p",[r._v("但是我们必须编写大量代码才能执行以下步骤")]),r._v(" "),e("p",[r._v("（1）使用功能区进行负载平衡。")]),r._v(" "),e("p",[r._v("（2）获取服务实例，然后获取基本 URL。")]),r._v(" "),e("p",[r._v("（3）利用 REST 模板来使用服务。 前面的代码如下")]),r._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v('@Controller\npublic class ConsumerControllerClient {\n    @Autowired\n    private LoadBalancerClient loadBalancer;\n    public void getEmployee() throws RestClientException, IOException {\n        ServiceInstance serviceInstance=loadBalancer.choose("employee-producer");\n        System.out.println(serviceInstance.getUri());\n        String baseUrl=serviceInstance.getUri().toString();\n        baseUrl=baseUrl+"/employee";\n        RestTemplate restTemplate = new RestTemplate();\n        ResponseEntity<String> response=null;\n        try{\n            response=restTemplate.exchange(baseUrl,\n                        HttpMethod.GET, getHeaders(),String.class);\n        }\n        catch (Exception ex)\n            {\n            System.out.println(ex);\n        }\n        System.out.println(response.getBody());\n    }\n')])])]),e("p",[r._v("之前的代码，有像 NullPointer 这样的例外的机会，并不是最优的。我们将看到如何使用 Netflix Feign 使呼叫变得更加轻松和清洁。如果 Netflix Ribbon 依赖关系也在类路径中，那么 Feign 默认也会负责负载平衡。")]),r._v(" "),e("h3",{attrs:{id:"_10、什么是-spring-cloud-bus-我们需要它吗"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10、什么是-spring-cloud-bus-我们需要它吗"}},[r._v("#")]),r._v(" 10、什么是 Spring Cloud Bus？我们需要它吗？")]),r._v(" "),e("p",[r._v("考虑以下情况：我们有多个应用程序使用 Spring Cloud Config 读取属性，而Spring Cloud Config 从 GIT 读取这些属性。")]),r._v(" "),e("p",[r._v("下面的例子中多个员工生产者模块从 Employee Config Module 获取 Eureka 注册的财产。")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbfd7744c47~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("p",[r._v("如果假设 GIT 中的 Eureka 注册属性更改为指向另一台 Eureka 服务器，会发生什么情况。在这种情况下，我们将不得不重新启动服务以获取更新的属性。")]),r._v(" "),e("p",[r._v("还有另一种使用执行器端点/刷新的方式。但是我们将不得不为每个模块单独调用这个 url。例如，如果 Employee Producer1 部署在端口 8080 上，则调用 http：// localhost：8080 / refresh。同样对于 Employee Producer2 http：//localhost：8081 / refresh 等等。这又很麻烦。这就是 Spring Cloud Bus 发挥作用的地方。")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyilong/picture-bed/raw/master/img/16f55fbff4981ae9~tplv-t2oaga2asx-watermark.png",alt:"img"}})]),r._v(" "),e("p",[r._v("Spring Cloud Bus 提供了跨多个实例刷新配置的功能。因此，在上面的示例中，如果我们刷新 Employee Producer1，则会自动刷新所有其他必需的模块。如果我们有多个微服务启动并运行，这特别有用。这是通过将所有微服务连接到单个消息代理来实现的。无论何时刷新实例，此事件都会订阅到侦听此代理的所有微服务，并且它们也会刷新。可以通过使用端点/总线/刷新来实现对任何单个实例的刷新。")]),r._v(" "),e("h3",{attrs:{id:"_11-springcloud断路器的作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-springcloud断路器的作用"}},[r._v("#")]),r._v(" 11.springcloud断路器的作用")]),r._v(" "),e("p",[r._v("当一个服务调用另一个服务由于网络原因或自身原因出现问题，调用者就会等待被调用者的响应 当更多的服务请求到这些资源导致更多的请求等待，发生连锁效应（雪崩效应）")]),r._v(" "),e("p",[r._v("断路器有完全打开状态:一段时间内 达到一定的次数无法调用 并且多次监测没有恢复的迹象 断路器完全打开 那么下次请求就不会请求到该服务")]),r._v(" "),e("p",[r._v("半开:短时间内 有恢复迹象 断路器会将部分请求发给该服务，正常调用时 断路器关闭")]),r._v(" "),e("p",[r._v("关闭：当服务一直处于正常状态 能正常调用")]),r._v(" "),e("h3",{attrs:{id:"_12、什么是springcloudconfig"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12、什么是springcloudconfig"}},[r._v("#")]),r._v(" 12、什么是SpringCloudConfig?")]),r._v(" "),e("p",[r._v("在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要分布式配置中心组件。在Spring Cloud中，有分布式配置中心组件spring cloud config ，它支持配置服务放在配置服务的内存中（即本地），也支持放在远程Git仓库中。在spring cloud config 组件中，分两个角色，一是config server，二是config client。")]),r._v(" "),e("p",[r._v("使用：")]),r._v(" "),e("p",[r._v("（1）添加pom依赖")]),r._v(" "),e("p",[r._v("（2）配置文件添加相关配置")]),r._v(" "),e("p",[r._v("（3）启动类添加注解@EnableConfigServer")]),r._v(" "),e("h3",{attrs:{id:"_13、spring-cloud-gateway"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13、spring-cloud-gateway"}},[r._v("#")]),r._v(" 13、Spring Cloud Gateway?")]),r._v(" "),e("p",[r._v("Spring Cloud Gateway是Spring Cloud官方推出的第二代网关框架，取代Zuul网关。网关作为流量的，在微服务系统中有着非常作用，网关常见的功能有路由转发、权限校验、限流控制等作用。")]),r._v(" "),e("p",[r._v("使用了一个RouteLocatorBuilder的bean去创建路由，除了创建路由RouteLocatorBuilder可以让你添加各种predicates和filters，predicates断言的意思，顾名思义就是根据具体的请求的规则，由具体的route去处理，filters是各种过滤器，用来对请求做各种判断和修改。")])])}),[],!1,null,null,null);t.default=i.exports}}]);